<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hub de An√°lise de Manuten√ß√£o</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <aside class="sidebar" aria-label="Menu de navega√ß√£o">
    <div class="logo">üîß RCA Hub</div>
    <nav>
      <a href="#sec-info">üìá Identifica√ß√£o</a>
      <a href="#sec-problema">üìù Problema</a>
      <a href="#sec-acoes">‚ö° A√ß√µes Imediatas</a>
      <a href="#sec-causas">üß† Causas & 5 Porqu√™s</a>
      <a href="#sec-espinha">üêü Espinha de Peixe</a>
    </nav>
    <div class="sidebar-actions">
      <button id="btnOnePage" class="btn primary">Exportar OnePage (PDF)</button>

      <button id="btnSalvar" class="btn primary">Salvar</button>
      <button id="btnLimpar" class="btn ghost">Limpar</button>
      <button id="btnPDF" class="btn outline">Imprimir/Salvar PDF</button>
    </div>
  </aside>

  <main class="content">
    <header class="topbar">
      <h1>An√°lise de Causa Raiz</h1>
      <p class="subtitle">Registre, investigue e gere o PDF da sua an√°lise.</p>
    </header>

    <!-- Identifica√ß√£o -->
    <section id="sec-info" class="card">
      <h2>Identifica√ß√£o</h2>
      <div class="grid-2">
        <label>Investigador(a)
          <input type="text" id="investigador" placeholder="Nome de quem est√° realizando a investiga√ß√£o" />
        </label>
        <label>Processo
          <input type="text" id="processo" placeholder="Ex.: Usinagem, Envase..." />
        </label>
        <label>Equipamento
          <input type="text" id="equipamento" placeholder="Ex.: Linha 3 - Prensa A" />
        </label>
        <label>Data
          <input type="date" id="data" />
        </label>
        <label>Ordem de Servi√ßo
          <input type="text" id="os" placeholder="Ex.: OS-2025-1234" />
        </label>
      </div>
    </section>

    <!-- Problema -->
    <section id="sec-problema" class="card">
      <h2>Descri√ß√£o do Problema</h2>
      <label>O que ocorreu?
        <textarea id="descProblema" rows="4" placeholder="Descreva o desvio/ocorr√™ncia com fatos, local, hor√°rio, impacto..."></textarea>
      </label>
      <div class="grid-2">
        <label>Por que n√£o foi detectado antes?
          <textarea id="naoDetectado" rows="3" placeholder="Falhas de alarme, inspe√ß√£o, procedimento, etc."></textarea>
        </label>
        <label>Alguma a√ß√£o agravou o desvio?
          <textarea id="acaoAgravou" rows="3" placeholder="Se sim, descreva a a√ß√£o e o efeito; se n√£o, deixe em branco."></textarea>
        </label>
      </div>
      <div class="grid-2">
        <fieldset class="fieldset">
          <legend>Desvio √© reincidente?</legend>
          <label class="radio"><input type="radio" name="reincidente" value="sim"> Sim</label>
          <label class="radio"><input type="radio" name="reincidente" value="nao" checked> N√£o</label>
        </fieldset>
        <fieldset class="fieldset">
          <legend>Relat√≥rios/An√°lises anteriores?</legend>
          <label class="radio"><input type="radio" name="relatorios" value="sim"> Sim</label>
          <label class="radio"><input type="radio" name="relatorios" value="nao" checked> N√£o</label>
        </fieldset>
      </div>
    </section>

    <!-- A√ß√µes Imediatas -->
    <section id="sec-acoes" class="card">
      <div class="section-header">
        <h2>A√ß√µes Corretivas Imediatas</h2>
        <button id="btnAddAcao" class="btn small">+ Adicionar a√ß√£o</button>
      </div>
      <div id="listaAcoes" class="list"></div>
      <template id="tplAcao">
        <div class="list-item">
          <div class="list-grid">
            <label>A√ß√£o
              <input type="text" class="acao-desc" placeholder="Descreva a a√ß√£o imediata" />
            </label>
            <label>Respons√°vel
              <input type="text" class="acao-resp" placeholder="Nome do respons√°vel" />
            </label>
            <label>Prazo
              <input type="date" class="acao-prazo" />
            </label>
          </div>
          <div class="list-actions">
            <button class="btn ghost btnRemover">Remover</button>
          </div>
        </div>
      </template>
    </section>

    <!-- Causas e 5 Porqu√™s -->
    <section id="sec-causas" class="card">
      <div class="section-header">
        <h2>Poss√≠veis Causas & 5 Porqu√™s</h2>
        <button id="btnAddCausa" class="btn small">+ Adicionar hip√≥tese</button>
      </div>

      <div id="listaCausas" class="list"></div>
      <template id="tplCausa">
        <div class="list-item">
          <div class="list-grid">
            <label>Hip√≥tese de causa
              <input type="text" class="causa-desc" placeholder="Descreva uma poss√≠vel causa" />
            </label>
            <div class="whys">
              <label>Por qu√™ 1
                <input type="text" class="pq1" placeholder="Primeiro porqu√™" />
              </label>
              <label>Por qu√™ 2
                <input type="text" class="pq2" placeholder="Segundo porqu√™" />
              </label>
              <label>Por qu√™ 3
                <input type="text" class="pq3" placeholder="Terceiro porqu√™" />
              </label>
              <label>Por qu√™ 4
                <input type="text" class="pq4" placeholder="Quarto porqu√™" />
              </label>
              <label>Por qu√™ 5
                <input type="text" class="pq5" placeholder="Quinto porqu√™" />
              </label>
            </div>
          </div>
          <div class="list-actions">
            <button class="btn ghost btnRemoverCausa">Remover</button>
          </div>
        </div>
      </template>
    </section>

    <!-- Espinha de Peixe -->
    <section id="sec-espinha" class="card">
      <h2>Diagrama de Espinha de Peixe (Ishikawa)</h2>
      <p>Preencha os fatores por categoria e marque se contribu√≠ram para a falha. As categorias destacadas indicam contribui√ß√£o.</p>

      <div class="fishbone-wrap">
        <svg id="fishbone" viewBox="0 0 1000 420" role="img" aria-label="Diagrama de espinha de peixe">
          <!-- Spine -->
          <line x1="80" y1="210" x2="900" y2="210" class="spine" />
          <polygon points="900,210 860,195 860,225" class="arrow" />

          <!-- Branches (upper) -->
          <g data-cat="M√©todo" class="branch" transform="translate(0,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="130" y="110">M√©todo</text>
          </g>
          <g data-cat="M√°quina" class="branch" transform="translate(140,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="130" y="110">M√°quina</text>
          </g>
          <g data-cat="M√£o de Obra" class="branch" transform="translate(280,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="110" y="110">M√£o de Obra</text>
          </g>

          <!-- Branches (lower) -->
          <g data-cat="Material" class="branch" transform="translate(0,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="120" y="320">Material</text>
          </g>
          <g data-cat="Medida" class="branch" transform="translate(140,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="120" y="320">Medida</text>
          </g>
          <g data-cat="Meio Ambiente" class="branch" transform="translate(280,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="90" y="320">Meio Ambiente</text>
          </g>

          <!-- Problem label -->
          <text x="910" y="215" class="problem">Problema</text>
        </svg>
      </div>

      <div class="grid-3 fish-inputs">
        <div class="fish-col" data-cat="M√©todo">
          <div class="fish-head">
            <h3>M√©todo</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√©todo" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de m√©todo..."></textarea>
        </div>
        <div class="fish-col" data-cat="M√°quina">
          <div class="fish-head">
            <h3>M√°quina</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√°quina" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores da m√°quina..."></textarea>
        </div>
        <div class="fish-col" data-cat="M√£o de Obra">
          <div class="fish-head">
            <h3>M√£o de Obra</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√£o de Obra" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de pessoas/treinamento..."></textarea>
        </div>
        <div class="fish-col" data-cat="Material">
          <div class="fish-head">
            <h3>Material</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Material" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de materiais/insumos..."></textarea>
        </div>
        <div class="fish-col" data-cat="Medida">
          <div class="fish-head">
            <h3>Medida</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Medida" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de medi√ß√£o/controle..."></textarea>
        </div>
        <div class="fish-col" data-cat="Meio Ambiente">
          <div class="fish-head">
            <h3>Meio Ambiente</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Meio Ambiente" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores ambientais..."></textarea>
        </div>
      </div>
    </section>

    <section id="onepage" class="onepage hidden" aria-hidden="true"></section>
    <footer class="footer">
      <small>Gerado por RCA Hub ‚Äî use o bot√£o "Imprimir/Salvar PDF" para gerar seu documento.</small>
    </footer>
  </main>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</body>
</html>
