<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hub de An√°lise de Manuten√ß√£o</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <aside class="sidebar" aria-label="Menu de navega√ß√£o">
    <div class="logo">üîß RCA Hub</div>
    <nav>
      <a href="#sec-info">üìá Identifica√ß√£o</a>
      <a href="#sec-problema">üìù Problema</a>
      <a href="#sec-acoes">‚ö° A√ß√µes Imediatas</a>
      <a href="#sec-causas">üß† Causas & 5 Porqu√™s</a>
      <a href="#sec-espinha">üêü Espinha de Peixe</a>
      <a href="#sec-guia">‚ÑπÔ∏è Informa√ß√µes</a>
    </nav>
    <div class="sidebar-actions">
      <button id="btnOnePage" class="btn primary">Exportar OnePage (PDF)</button>

      <button id="btnSalvar" class="btn primary">Salvar</button>
      <button id="btnLimpar" class="btn ghost">Limpar</button>
      <button id="btnPDF" class="btn outline">Imprimir/Salvar PDF</button>
    </div>
  </aside>

  <main class="content">
    <header class="topbar">
      <h1>An√°lise de Causa Raiz</h1>
      <p class="subtitle">Registre, investigue e gere o PDF da sua an√°lise.</p>
    </header>

    <section id="sec-guia" class="card guide-card">
      <details id="guideDetails">
        <summary class="guide-summary">
          <span class="guide-icon">‚ÑπÔ∏è</span>
          <span class="guide-title">Instru√ß√µes de preenchimento</span>
          <span class="guide-hint">Clique para expandir</span>
        </summary>

        <!-- corpo do guia (pode usar seu conte√∫do atual) -->
        <article class="guide guide-body">
          <p>Este guia explica, passo a passo, como preencher e gerar seu relat√≥rio ‚ÄúOnePage‚Äù.</p>
          <section id="sec-guia" class="card">
  <h2>Guia de Utiliza√ß√£o do RCA Hub</h2>
  <article class="guide">
    <p>Este guia explica, passo a passo, como preencher e gerar seu relat√≥rio ‚ÄúOnePage‚Äù de An√°lise de Causa Raiz.</p>

    <h3>1) Identifica√ß√£o</h3>
    <ul>
      <li><b>Investigador(a), Processo, Equipamento, Data, OS:</b> preencha para rastreabilidade do caso.</li>
      <li>Dica: a <b>Data</b> √© preenchida automaticamente na primeira abertura.</li>
    </ul>

    <h3>2) Descri√ß√£o do Problema</h3>
    <ul>
      <li><b>O que ocorreu?</b> descreva fatos, local, hor√°rio e impacto.</li>
      <li><b>Por que n√£o foi detectado antes?</b> explique falhas de alarme, inspe√ß√£o ou procedimento.</li>
      <li><b>Alguma a√ß√£o agravou?</b> detalhe se algo piorou o desvio.</li>
      <li>Marque se √© <b>reincidente</b> e se existem <b>relat√≥rios anteriores</b>.</li>
      <li><i>Quebras de linha</i> nos textos s√£o preservadas no OnePage.</li>
    </ul>

    <h3>3) A√ß√µes Imediatas</h3>
    <ul>
      <li>Clique em <b>+ Adicionar a√ß√£o</b> e preencha <b>Descri√ß√£o, Respons√°vel e Prazo</b>.</li>
      <li>Use <b>Remover</b> para excluir itens.</li>
    </ul>

    <h3>4) Causas & 5 Porqu√™s</h3>
    <ul>
      <li>Em <b>Poss√≠veis Causas</b>, registre hip√≥teses. Cada hip√≥tese tem campos dos <b>5 Porqu√™s</b>.</li>
      <li>No OnePage, as hip√≥teses e os porqu√™s aparecem no <b>Setor 3</b>.</li>
    </ul>

    <h3>5) Espinha de Peixe (Ishikawa)</h3>
    <ul>
      <li>Para cada categoria (<b>M√©todo</b>, <b>M√°quina</b>, <b>M√£o de Obra</b>, <b>Material</b>, <b>Medida</b>, <b>Meio Ambiente</b>):</li>
      <li>‚Ä¢ Liste os fatores no textarea e ative <b>Contribuiu</b> se o item participou da falha.</li>
      <li>‚Ä¢ No OnePage, o diagrama destaca os ramos que contribu√≠ram e, abaixo, separa
        <b>Itens que contribu√≠ram</b> de <b>Avaliados (n√£o contribu√≠ram)</b>, preservando as quebras de linha.</li>
    </ul>

    <h3>6) A√ß√µes Futuras</h3>
    <ul>
      <li>Clique em <b>+ Adicionar a√ß√£o futura</b> e preencha <b>Descri√ß√£o, Respons√°vel, Prazo, Status</b> (Pendente/Conclu√≠da).</li>
      <li>No OnePage, as a√ß√µes futuras surgem em um bloco pr√≥prio com <b>chips de status</b>.</li>
    </ul>

    <h3>7) Salvar, Limpar e Exportar</h3>
    <ul>
      <li><b>Salvar</b> grava localmente no navegador (LocalStorage).</li>
      <li><b>Imprimir/Salvar PDF</b> cria relat√≥rio multi-p√°gina (modo impress√£o do navegador).</li>
      <li><b>Exportar OnePage (PDF)</b> gera uma √∫nica l√¢mina (A4 paisagem) com os 3 setores + rodap√©.</li>
    </ul>

    <h3>8) Dicas de Preenchimento</h3>
    <ul>
      <li>Seja objetivo e use <b>pontos</b> nas causas e fatores do Ishikawa.</li>
      <li>Registre <b>respons√°veis e prazos</b> em todas as a√ß√µes para facilitar o acompanhamento.</li>
      <li>Use o campo ‚ÄúA√ß√£o que agravou‚Äù para evitar recorr√™ncia do mesmo erro no futuro.</li>
    </ul>

    <h3>9) Erros Comuns & Solu√ß√µes</h3>
    <ul>
      <li><b>PDF n√£o gera:</b> confirme que as bibliotecas <code>html2canvas</code> e <code>jsPDF</code> est√£o carregadas.</li>
      <li><b>Campos n√£o aparecem no OnePage:</b> verifique se foram preenchidos e se voc√™ clicou em <b>Exportar OnePage (PDF)</b> ap√≥s preencher.</li>
      <li><b>Dados sumiram:</b> use <b>Salvar</b> sempre que fizer altera√ß√µes importantes. O <b>Limpar</b> apaga tudo.</li>
    </ul>

    <h3>10) Atalhos & Boas Pr√°ticas</h3>
    <ul>
      <li>Use <b>Ctrl/Cmd + F</b> para localizar termos no navegador.</li>
      <li>Insira <b>links</b> para evid√™ncias (docs, fotos) nas observa√ß√µes e no corpo dos campos.</li>
      <li>Revise o OnePage antes de exportar: verifique t√≠tulos, datas e status.</li>
    </ul>

    <p class="guide-end">Pronto! Seu RCA estar√° padronizado, completo e pronto para distribui√ß√£o.</p>
  </article>
</section>
        </article>
      </details>
    </section>

    <!-- Identifica√ß√£o -->
    <section id="sec-info" class="card">
      <h2>Identifica√ß√£o</h2>
      <div class="grid-2">
        <label>Investigador(a)
          <input type="text" id="investigador" placeholder="Nome de quem est√° realizando a investiga√ß√£o" />
        </label>
        <label>Processo
          <input type="text" id="processo" placeholder="Ex.: Usinagem, Envase..." />
        </label>
        <label>Equipamento
          <input type="text" id="equipamento" placeholder="Ex.: Linha 3 - Prensa A" />
        </label>
        <label>Data
          <input type="date" id="data" />
        </label>
        <label>Ordem de Servi√ßo
          <input type="text" id="os" placeholder="Ex.: OS-2025-1234" />
        </label>
      </div>
    </section>

    <!-- Problema -->
    <section id="sec-problema" class="card">
      <h2>Descri√ß√£o do Problema</h2>
      <label>O que ocorreu?
        <textarea id="descProblema" rows="4" placeholder="Descreva o desvio/ocorr√™ncia com fatos, local, hor√°rio, impacto..."></textarea>
      </label>
      <div class="grid-2">
        <label>Por que n√£o foi detectado antes?
          <textarea id="naoDetectado" rows="3" placeholder="Falhas de alarme, inspe√ß√£o, procedimento, etc."></textarea>
        </label>
        <label>Alguma a√ß√£o agravou o desvio?
          <textarea id="acaoAgravou" rows="3" placeholder="Se sim, descreva a a√ß√£o e o efeito; se n√£o, deixe em branco."></textarea>
        </label>
      </div>
      <div class="grid-2">
        <fieldset class="fieldset">
          <legend>Desvio √© reincidente?</legend>
          <label class="radio"><input type="radio" name="reincidente" value="sim"> Sim</label>
          <label class="radio"><input type="radio" name="reincidente" value="nao" checked> N√£o</label>
        </fieldset>
        <fieldset class="fieldset">
          <legend>Relat√≥rios/An√°lises anteriores?</legend>
          <label class="radio"><input type="radio" name="relatorios" value="sim"> Sim</label>
          <label class="radio"><input type="radio" name="relatorios" value="nao" checked> N√£o</label>
        </fieldset>
      </div>
    </section>

    <!-- A√ß√µes Imediatas -->
    <section id="sec-acoes" class="card">
      <div class="section-header">
        <h2>A√ß√µes Corretivas Imediatas</h2>
        <button id="btnAddAcao" class="btn small">+ Adicionar a√ß√£o</button>
      </div>
      <div id="listaAcoes" class="list"></div>
      <template id="tplAcao">
        <div class="list-item">
          <div class="list-grid">
            <label>A√ß√£o
              <input type="text" class="acao-desc" placeholder="Descreva a a√ß√£o imediata" />
            </label>
            <label>Respons√°vel
              <input type="text" class="acao-resp" placeholder="Nome do respons√°vel" />
            </label>
            <label>Prazo
              <input type="date" class="acao-prazo" />
            </label>
          </div>
          <div class="list-actions">
            <button class="btn ghost btnRemover">Remover</button>
          </div>
        </div>
      </template>
    </section>

    <!-- Causas e 5 Porqu√™s -->
    <section id="sec-causas" class="card">
      <div class="section-header">
        <h2>Poss√≠veis Causas & 5 Porqu√™s</h2>
        <button id="btnAddCausa" class="btn small">+ Adicionar hip√≥tese</button>
      </div>

      <div id="listaCausas" class="list"></div>
      <template id="tplCausa">
        <div class="list-item">
          <div class="list-grid">
            <label>Hip√≥tese de causa
              <input type="text" class="causa-desc" placeholder="Descreva uma poss√≠vel causa" />
            </label>
            <div class="whys">
              <label>Por qu√™ 1
                <input type="text" class="pq1" placeholder="Primeiro porqu√™" />
              </label>
              <label>Por qu√™ 2
                <input type="text" class="pq2" placeholder="Segundo porqu√™" />
              </label>
              <label>Por qu√™ 3
                <input type="text" class="pq3" placeholder="Terceiro porqu√™" />
              </label>
              <label>Por qu√™ 4
                <input type="text" class="pq4" placeholder="Quarto porqu√™" />
              </label>
              <label>Por qu√™ 5
                <input type="text" class="pq5" placeholder="Quinto porqu√™" />
              </label>
            </div>
          </div>
          <div class="list-actions">
            <button class="btn ghost btnRemoverCausa">Remover</button>
          </div>
        </div>
      </template>
    </section>

    <!-- Espinha de Peixe -->
    <section id="sec-espinha" class="card">
      <h2>Diagrama de Espinha de Peixe (Ishikawa)</h2>
      <p>Preencha os fatores por categoria e marque se contribu√≠ram para a falha. As categorias destacadas indicam contribui√ß√£o.</p>

      <div class="fishbone-wrap">
        <svg id="fishbone" viewBox="0 0 1000 420" role="img" aria-label="Diagrama de espinha de peixe">
          <!-- Spine -->
          <line x1="80" y1="210" x2="900" y2="210" class="spine" />
          <polygon points="900,210 860,195 860,225" class="arrow" />

          <!-- Branches (upper) -->
          <g data-cat="M√©todo" class="branch" transform="translate(0,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="130" y="110">M√©todo</text>
          </g>
          <g data-cat="M√°quina" class="branch" transform="translate(140,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="130" y="110">M√°quina</text>
          </g>
          <g data-cat="M√£o de Obra" class="branch" transform="translate(280,0)">
            <line x1="250" y1="210" x2="150" y2="120" />
            <text x="110" y="110">M√£o de Obra</text>
          </g>

          <!-- Branches (lower) -->
          <g data-cat="Material" class="branch" transform="translate(0,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="120" y="320">Material</text>
          </g>
          <g data-cat="Medida" class="branch" transform="translate(140,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="120" y="320">Medida</text>
          </g>
          <g data-cat="Meio Ambiente" class="branch" transform="translate(280,0)">
            <line x1="250" y1="210" x2="150" y2="300" />
            <text x="90" y="320">Meio Ambiente</text>
          </g>

          <!-- Problem label -->
          <text x="910" y="215" class="problem">Problema</text>
        </svg>
      </div>

      <div class="grid-3 fish-inputs">
        <div class="fish-col" data-cat="M√©todo">
          <div class="fish-head">
            <h3>M√©todo</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√©todo" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de m√©todo..."></textarea>
        </div>
        <div class="fish-col" data-cat="M√°quina">
          <div class="fish-head">
            <h3>M√°quina</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√°quina" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores da m√°quina..."></textarea>
        </div>
        <div class="fish-col" data-cat="M√£o de Obra">
          <div class="fish-head">
            <h3>M√£o de Obra</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="M√£o de Obra" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de pessoas/treinamento..."></textarea>
        </div>
        <div class="fish-col" data-cat="Material">
          <div class="fish-head">
            <h3>Material</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Material" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de materiais/insumos..."></textarea>
        </div>
        <div class="fish-col" data-cat="Medida">
          <div class="fish-head">
            <h3>Medida</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Medida" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores de medi√ß√£o/controle..."></textarea>
        </div>
        <div class="fish-col" data-cat="Meio Ambiente">
          <div class="fish-head">
            <h3>Meio Ambiente</h3>
            <label class="switch">
              <input type="checkbox" class="contrib" data-target="Meio Ambiente" />
              <span>Contribuiu</span>
            </label>
          </div>
          <textarea rows="5" placeholder="Liste fatores ambientais..."></textarea>
        </div>
      </div>
    </section>

    <!-- A√ß√µes Futuras -->
<section id="sec-acoes-futuras" class="card">
  <div class="section-header">
    <h2>A√ß√µes Futuras</h2>
    <button id="btnAddAcaoFutura" class="btn small">+ Adicionar a√ß√£o futura</button>
  </div>

  <div id="listaAcoesFuturas" class="list"></div>

  <template id="tplAcaoFutura">
    <div class="list-item">
      <div class="list-grid">
        <label>A√ß√£o futura
          <input type="text" class="acaoF-desc" placeholder="Descreva a a√ß√£o futura" />
        </label>
        <label>Respons√°vel
          <input type="text" class="acaoF-resp" placeholder="Nome do respons√°vel" />
        </label>
        <label>Prazo
          <input type="date" class="acaoF-prazo" />
        </label>
        <label>Status
          <select class="acaoF-status">
            <option value="pendente" selected>Pendente</option>
            <option value="concluida">Conclu√≠da</option>
          </select>
        </label>
      </div>
      <div class="list-actions">
        <button class="btn ghost btnRemoverFutura">Remover</button>
      </div>
    </div>
  </template>
</section>

    <section id="onepage" class="onepage hidden" aria-hidden="true"></section>


    <footer class="footer">
      <small>Gerado por RCA Hub ‚Äî use o bot√£o "Imprimir/Salvar PDF" para gerar seu documento.</small>
    </footer>
  </main>

  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</body>
</html>
